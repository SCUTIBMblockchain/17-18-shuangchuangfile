<br/><br/><br/><br/>
<center><font size=24>研究报告</font></center>
<br/><br/><br/><br/>
<br/><br/><br/><br/>
<br/><br/><br/><br/>
<center><font size=18>目录</font></center>
<!-- TOC -->

- [研究报告简述](#研究报告简述)
- [研究内容简述](#研究内容简述)
- [一、应用底层————区块链网络架构](#一应用底层区块链网络架构)
    - [Fabric 1.0 总体架构简要介绍](#fabric-10-总体架构简要介绍)
    - [fabric 中的区块链账本](#fabric-中的区块链账本)
- [二、智能合约：（TODO！！！！！！！）](#二智能合约todo)
- [三、分布式一致性与共识服务和算法](#三分布式一致性与共识服务和算法)
    - [hyperledger Fabric 中的共识服务](#hyperledger-fabric-中的共识服务)
    - [一些其他的共识算法的简单介绍](#一些其他的共识算法的简单介绍)
- [四、区块链技术深入探讨](#四区块链技术深入探讨)
        - [区块链的独创性](#区块链的独创性)
        - [区块链存在的问题 （TODO！！！！！）](#区块链存在的问题-todo)
- [Reference](#reference)

<!-- /TOC -->


## 研究报告简述

研究报告主要分为两个部分，第一个部分简述项目开展以来，小组成员对区块链技术的研究，并在研究报告中结合实际项目对区块链技术的应用。第二个部分主要对区块链技术的实际应用场景、应用难题、技术展望进行了一定的思考和讨论。

文章中所涉及到和应用的内容在文末有列出。

## 研究内容简述
目前区块链技术在行业中的应用尚处在初级阶段，大面积的落地项目和实际应用场景相对其他成熟技术比较局限和狭小。现在比较出名的区块链项目包括但是不限于：
* 比特币/Bitcoin
* Hyperledger Fabric
* 以太坊/Ethereum
* EOS
* NEO

小组选择了当下热门的区块链应用场景————医疗健康平台建设，结合区块链技术，深入挖掘和研究了区块链技术的潜力。通过这个项目，我们小组在保证完整实现项目目标的同时，对区块链技术本身的问题和发展都得到了更加全面和客观的理解和认识。另外，我们在开发过程中总结了一些遇到的问题和在摸索中得到的解答，汇集了不少有效、新颖的观点。以上这些都会是这个研究报告的主体内容。

## 一、应用底层————区块链网络架构

### Fabric 1.0 总体架构简要介绍

早在 2016 年 IBM 其实就已经推出了他们的联盟链实现 Hyperledger Fabric 0.6(以下简称 Fabric 0.6) ，当时的这个版本在应用过程中实际上还存在许多问题，这也导致了这个 Fabric 版本并没有真正的被大规模应用到行业中。


图 1.1 展示了 Fabric 0.6 版本的总体架构：
![fabric 0.6](./assest/fabric0.6.jpg)

图 1.2 展示了 Fabric 0.6 版本的运行时架构：

![fabric 0.6](./assest/0.6runtime.png)


0.6版本的架构特点是：

* 结构简单： 应用-成员管理- Peer 的三角形关系，主要业务功能全部集中于 Peer 节点；
* 架构问题：由于 peer 节点承担了太多的功能，所以带来扩展性、可维护性、安全性、业务隔离等方面的诸多问题，所以0.6版本在推出后，并没有大规模被行业使用，只是在一些零星的案例中进行业务验证；

针对上述问题，1.0版本做了很大的改进和重构：

图 1.3 展示了最新的 Fabric 1.0 运行时架构：
![fabric runtime](./assest/fabric-runtime.jpg)

Fabric 1.0 架构要点：

* 分拆 Peer 的功能，将 Blockchain 的数据维护和共识服务进行分离，共识服务从 Peer 节点中完全分离出来，独立为 Orderer 节点提供共识服务；
* 基于新的架构，实现多通道（channel）的结构，实现了更为灵活的业务适应性（业务隔离、安全性等方面）
支持更强的配置功能和策略管理功能，进一步增强系统的灵活性和适应性；

* 最新的 1.0 版本中，上图中的 Membership 服务已经改名为 fabric-ca


从 Fabric 的新架构设计的建议文档看，1.0 版本的设计目标如下：

1. chaincode 信任的灵活性：支持多个 ordering 服务节点，增强共识的容错能力和对抗 orderer 作恶的能力
2. 扩展性： 将 endorsement 和 ordering 进行分离，实现多通道（实际是分区）结构，增强系统的扩展性；同时也将 chaincode 执行、ledger、state 维护等非常消耗系统性能的任务与共识任务分离，保证了关键任务（ordering）的可靠执行
3. 保密性：新架构对于 chaincode 在数据更新、状态维护等方面提供了新的保密性要求，提高系统的业务、安全方面的能力
4. 共识服务的模块化：支持可插拔的共识结构，支持多种共识服务的接入和服务实现
架构特点

Hyperledger fabirc 1.0 版本的在 0.6 版本基础上，针对安全、保密、部署、维护、实际业务场景需求等方面进行了很多改进，特别是 Peer 节点的功能分离，给系统架构具备了支持多通道、可插拔的共识的能力。

Fabric 1.0版本的关键架构：

多链与多通道
Fabric 1.0 的重要特征是支持多 chain 和多 channel；

所谓的 chain（链）实际上是包含 Peer 节点、账本、ordering 通道的逻辑结构，它将参与者与数据（包含 chaincode 在）进行隔离，满足了不同业务场景下的”不同的人访问不同数据“的基本要求。

同时，一个 peer 节点也可以参与到多个 chain 中（通过接入多个 channel）；如下图所示
![fabric runtime](./assest/network.jpg)


关于通道：通道是有共识服务（ordering）提供的一种通讯机制，类似于消息系统中的发布-订阅（PUB/SUB)中的 topic；基于这种发布-订阅关系，将 peer 和 orderer 连接在一起，形成一个个具有保密性的通讯链路（虚拟），实现了业务隔离的要求；通道也与账本（ledger）-状态（worldstate）紧密相关；如下图所示：

![fabric runtime](./assest/channel.png)

共识服务与（P1、PN）、（P1、P2、P3）、（P2、P3）组成了三个相互独立的通道，加入到不同通道的 Peer 节点能够维护各个通道对应的账本和状态；也其实也对应现实世界中，不同业务场景下的参与方，例如银行、保险公司；物流企业、生产企业等实体结构；我们可以看到 channel 机制实际上是的 Fabric 建模实际业务流程的能力大大增强了，大家可以发挥想象力去找到可能的应用领域

交易（数据）流程说明
新版本的架构变化导致新的交易流程的变化，我们简述如下：

总体流程如下图所示：

![fabric runtime](./assest/transaction.jpg)



1. 应用程序通过 SDK 发送请求道 Peer 节点（一个或多个）
2. peer 节点分别执行交易（通过 chaincode），但是并不将执行结果提交到本地的账本中（可以认为是模拟执行，交易处于挂起状态），参与背书的 peer 将执行结果返回给应用程序（其中包括自身对背书结果的签名）
3. 应用程序 收集背书结果并将结果提交给 Ordering 服务节点
4. Ordering 服务节点执行共识过程并生成 block，通过消息通道发布给 Peer 节点，由 peer 节点各自验证交易并提交到本地的 ledger 中（包括 state 状态的变化）
上述过程对应的执行序列图如下：

![fabric runtime](./assest/transactionflow.jpg)


### fabric 中的区块链账本

要了解 Fabric 对事务的处理，首先我们需要了解 Fabric 中的账本，也就是实际存储和查询数据的地方。

图 1.4 为 IBM 微讲堂中对 Fabric 1.0 账本的示意图：

![data system](./assest/data-record.png)

Fabric 1.0中的账本分为 3 种：

1. 区块链数据，这是用文件系统存储在 Committer 节点上的。区块链中存储了 Transaction 的读写集。
2. 为了检索区块链的方便，所以用 Level DB 对其中的 Transaction 进行了索引。
3. ChainCode 操作的实际数据存储在 State Database 中，这是一个 Key Value 的数据库，Fabric 0.6 默认采用的 Level DB，1.0 也支持使用 Couch DB 作为 State Database。

三、事务提交过程
了解了Fabric中的账本，接下来我们来了解一下对这些账本的操作涉及到的Transaction。

详细可见 fabric 1.0 安装配置与测试一文（中期研究报告）。

当执行 a 向 b 转账 10 元，在 cli 中执行的命令为：

    peer chaincode invoke -o orderer.example.com:7050  --tls $CORE_PEER_TLS_ENABLED --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/cacerts/ca.example.com-cert.pem  -C mychannel -n devincc -c '{"Args":["invoke","a","b","10"]}'

当 cli 中运行该命令时，相关的事务生命周期和相关账本的示例图如下：

![transaction](./assest/lifecycle.png)

## 二、智能合约：（TODO！！！！！！！）

智能合约（Smart Contract）是区块链中应用到的，时下非常热门的概念。它最重要的特性是使得交易能够在没有第三方的情况下进行，而这种交易本身是可信的。另外它还具有使交易是无法追踪、同时也是不可逆的特性。

智能合约的概念于 1995 年就已经被科学家 Nick Szabo 提出了，他将智能合约描述为一种以信息化方式传播、验证或者执行合约的计算机协议。

下面是一段引用于维基百科的描述。

> A smart contract is a computer protocol intended to digitally facilitate, verify, or enforce the negotiation or performance of a contract. Smart contracts allow the performance of credible transactions without third parties. These transactions are trackable and irreversible.

![smart-contract](./assest/smart-contract.jpg)

率先应用了诸如智能合约、分布式一致性等特性在数字货币中，并成为区块链鼻祖的比特币 (Bitcoin) 虽然通过 POW (proof of work) 实现了分布式一致性，同时使用 UTXO 模型 存储和管理底层数据结构，实现了去中心化的分布式账本，并且在一定程度上实现了『可编程』这一特点，但是它的脚本机制非常简单，只是一个基于堆栈式的脚本语言，它不仅没有函数的功能，同时也不是图灵完备的，无法实现复杂的逻辑。

## 三、分布式一致性与共识服务和算法
从比特币为首的加密货币大火以来，新的区块链应用和基础设施等等层出不穷，区块链作为新兴的热门技术也已经被无数人所知晓和研究。但是仅仅局限于完成一两个应用并不是我们完成这个项目的终极目的。这些区块链应用的底层技术，也就是作为一个分布式网络他们是如何工作的，是整个区块链应用的核心，也是我们学习和研究的重点内容。

无论是 Bitcoin、Hyperledger Fabric 还是 Ethereum，作为一个分布式网络，首先需要解决分布式一致性的问题。在网络中所有的节点需要对同一个提案或者值达成共识。

节点间建立共识这一问题在一个所有节点都是可以被完全信任的分布式集群中已经是一个比较难以解决的问题，更不用说在复杂的区块链网络中了。区块链网络中并没有强制要求每个节点都是可信任的节点，因此问题的复杂程度对比普通的分布式网络来说是上升了一个层次的。

无论是在哪一个分布式系统中，分布式系统的一致性问题都是必须解决的问题。具体地讲，这个问题可以描述为：如何保证一个集群中，所有节点中的数据完全相同并且能够对某个提案（Proposal）达成一致。

只有一致性这个问题得到解决之后，分布式系统才能够正常工作。而区块链中所应用的共识算法，就是这样一个用来保证分布式系统一致性的方法。对于共识算法，我们主要研究了 Hyperledger Fabric 中应用到的和一些目前已经提出的算法。

### hyperledger Fabric 中的共识服务

作为现在比较流行的区块链基础设施之一：Fabric 中当然也应用到了共识机制。

我们使用的项目使用的 fabric 版本为 1.0 版本，目前 fabric 提供的共识服务有三种：solo，kafka和 PBFT。

fabric 中对于共识服务的实现并非简单基于一个或者多个共识算法，而是更加深入和完整地考虑到分布式系统中消息的投递以及事务处理的问题，并以此保证网络中业务的一致性。因此完整地研究 fabric 的共识服务实现是有益且有必要的。

接下来介绍 fabric 如何实现完整的共识服务。

首先， fabric 中建立共识的过程由以下两个独立的过程构成：

* Ordering of transactions (交易排序)
* Validating Transactions（交易验证）

fabric 从设计逻辑上将这个两个过程分离开来，保证了 fabric 可以采用任何的共识模块。另一个角度来说，我们可以在 fabric 上使用自己开发的共识算法（当然我们没有深入到这一个步骤），从这个角度来说，fabric 采取的模块化设计，无疑是使得我们在应用落地上的灵活性、安全性以及可定制性得到了加强！

1.0 版本中 fabric 的通信也是一大亮点，同时也是共识服务的关键点所在。fabric 的通信主要有三种节点：
1. Orderer 作为 fabric 共识服务的网络节点；
2. Peer 节点，作为组成 fabric 网络的主要节点；
3. client 端，作为用户使用的端口，负责直接与 fabric 网络通信。

最后 fabric 的主要模块提供了共识服务的完整架构。如图显示了几个重要的设计模块（没有全部涉及到）：
![transaction](./assest/modules.png)

模块说明：

一、Kafka 模块（Orderer以Kafka方式对外提供共识服务）
1. Broker：Kafka的Broker信息
2. Partitioner：kafka的基础连接信息，包括topic、partition
3. Consumer、Producer：分别为kafka的消费、生产者接口
4. Orderer：消息的排序与数据块管理接口

二、Multichain

封装了Chain操作相关接口。Chain目前有四种实现方式：SystemChain 以及其它Chain（Kafaka、Solo、Sbft）。其中 SystemChain 为必须，其他三个根据配置启用。

1. manager：主要负责 chain 的创建与访问控制。
2. chainsupport：主要负责 chain 的操作接口，包括新增签名，数据块写入等。
3. systemchain: 封装了systemchain 的相关操作，systemchain 主要用于管理配置以及安全相关控制。

三、ledger

orderer 对外服务过程中，允许 client 客户端(例如peer)批量获取消息， 所以orderer 需要维护历史消息拷贝。这些历史消息维护在 Orderer 的 Ledger 模块中。

1. File：实现了以 json 格式为存储方式的的文件系统账本。该账本实现方式支持容灾，但性能不高，
2. Ram : Ram 实现了一个简单的基于内存存储的账本，可以自由调整数据存储相关参数，例如历史存储大小等。该账本不支持容灾，每次系统挂掉，内存数据将会消失，重启后，将会重新建立新的账本。

四、common：提供了一些公共的接口，包括配置信息、消息的分组与组装、消息过滤规则等。


在一个 fabric 网络中，建立共识的第一步是从 client 客户端接收交易。这里 Orderer 主要提供两个Grpc接口：Broadcast 和 Deliver，两个接口面向客户端（fabric 网络中的 peer）通信。peer 节点通过 Broadcast 向 orderer 发送消息，orderer 通过 Broadcast 获取客户端的消息并将其储存。peer 节点通过 Deliver接口从Order获取数据。

紧接着 orderer 接收到交易之后，由 Ordering Service 进行交易排序。这里Ordering Service 可以用多种方法实现，在开发测试阶段可以用中心化的排序服务，也可以面向不同的网络采用分布式协议。

为了实现交易的私密，ordering service 即排序模块被设计成不能看到交易的具体内容（对交易内容不可见），交易的内容加密方式则可以采用加密或者是哈希处理。

交易通过接口被传递到排序服务，然后排序服务根据共识算法和配置策略将交易排序。为了提高效率，排序服务会将多个交易打包成一个块再输出，打包方式可以选择按时间间隔打包或者按照数目打包，排序服务的最关键职责需要保证块内交易的时间顺序不会出现分叉。

为了校验交易的正确性，共识的建立依赖于智能合约层，智能合约层定义了一些逻辑来确认如何验证交易有效。智能合约层根据特定的策略与约定来确认每一笔交易都是有效的。无效的交易会被拒绝，并在块中剔除。

潜在的校验失败主要分为以下两种：语法错误、逻辑错误。

语法错误包含以下几种类型，比如无效输入、未验证的签名、重复的交易等，这类交易应该被丢弃。

第二类错误比较复杂，需要有特定策略来觉得如何处理。比如，一笔交易经验证是多重支付。我们需要记录这类交易已验证是否是策略所需要的。

共识层通过通讯层来实现与 peer 或者是其他节点的消息互通。

### 一些其他的共识算法的简单介绍
POW：Proof of Work ———— 工作证明
POW 是比特币使用的共识算法。比特币在 Block 的生成过程中使用了 POW 机制，一个符合要求的 Block Hash 由 N 个前导零构成，零的个数取决于网络的难度值。要得到合理的 Block Hash 需要经过大量运算，计算时间取决于机器的哈希运算速度。当某个节点提供出一个合理的 Block Hash 值，说明该节点确实经过了大量的尝试计算。这也就是 POW(proof of work) 的由来。当然，并不能得出计算次数的绝对值，因为寻找合理 hash 是一个概率事件。当节点拥有占全网 n% 的算力时，该节点即有 n/100 的概率找到 Block Hash。

POS：Proof of Stake ———— 股权证明
POS：也称股权证明，类似于财产储存在银行的一种共识机制。这种模式会根据你持有数字货币的量和时间，分配给你相应的利息。 
简单来说，就是一个根据你持有货币的量和时间，给你发利息的一个制度，在股权证明 POS 模式下，有一个名词叫币龄，每个币每天产生 1 币龄，比如你持有 100 个币，总共持有了 30 天，那么，此时你的币龄就为 3000，这个时候，如果你发现了一个 POS 区块，你的币龄就会被清空为 0。你每被清空 365 币龄，你将会从区块中获得 0.05 个币的利息(假定利息可理解为年利率 5%)，那么在这个案例中，利息 = 3000 * 5% / 365 = 0.41 个币。

DPOS：Delegated Proof of Stake ———— 委任权益证明
比特股的 DPoS 机制，中文名叫做股份授权证明机制（又称受托人机制），它的原理是让每一个持有比特股的人进行投票，由此产生 101 位代表 , 我们可以将其理解为 101 个超级节点或者矿池，而这 101 个超级节点彼此的权利是完全相等的。从某种角度来看，类比地说 DPOS 有点像是议会制度或人民代表大会制度。如果代表不能履行他们的职责（当轮到他们时，没能生成区块），他们会被除名，网络会选出新的超级节点来取代他们。DPOS 的出现最主要还是因为矿机的产生，大量的算力在不了解也不关心比特币的人身上，类似演唱会的黄牛，大量囤票而丝毫不关心演唱会的内容。

PBFT：Practical Byzantine Fault Tolerance ———— 实用拜占庭容错算法
PBFT 是一种状态机副本复制算法，即服务作为状态机进行建模，状态机在分布式系统的不同节点进行副本复制。每个状态机的副本都保存了服务的状态，同时也实现了服务的操作。将所有的副本组成的集合使用大写字母 R 表示，使用 0 到 |R|-1 的整数表示每一个副本。为了描述方便，假设 |R|=3f+1，这里 f 是有可能失效的副本的最大个数。尽管可以存在多于 3f+1 个副本，但是额外的副本除了降低性能之外不能提高可靠性。

以上主要是目前主流的几个共识算法。 
从时间上来看，这个顺序也是按该共识算法从诞生到热门的顺序来定。 
对于 POW，直接让比特币成为了现实，并投入使用。而 POS 的存在主要是从经济学上的考虑和创新。而最终由于专业矿工和矿机的存在，让社区对这个标榜去中心化的算法有了实质性的中心化担忧，即传闻 60％～70% 的算力集中在中国。因此后来又出现 DPOS，这种不需要消耗太多额外的算力来进行矿池产出物的分配权益方式。但要说能起到替代作用，DPOS 来单独替代 POW，POS 或者 POW＋POS 也不太可能，毕竟存在即合理。每种算法都在特定的时间段中有各自的考虑和意义，无论是技术上，还是业务上。

如果跳出技术者的角度，更多结合政治与经济的思考方式在里面，或许还会跳出更多的共识算法，如结合类似 PPP 概念的共识方式，不仅能达到对恶意者的惩罚性质，还能达到最高效节约算力的目的也说不定。

至于说算法的选择。我们说共识最好是模块化设计的,这样有利于我们根据不同的使用场景选择不同的共识算法。因为不论我们怎样改进算法，共识算法的选择始终都与应用场景高度相关，我们或许可以挑出一个最优的算法，但是在另一个场景下，这个算法未必仍然是最优。具体地来说，可信环境使用 paxos 或者 raft，带许可的联盟链可使用 pbft ，非许可链可以是 pow，pos，ripple 等，根据信任度分级，自由选择共识机制，我们才能取得最优。

## 四、区块链技术深入探讨

事实上，在项目开发的过程中，我们逐渐意识到，即便是作为当下最火的新兴技术之一，被誉为“未来”的区块链本身仍然存在着许多问题。尽管它看上去是一个相对完美的解决方案，但是当它落实到我们的生活中的时候，它本身的一些弊端就开始显现。区块链技术于 2016 年出现在 Gartener 的年度新兴技术成熟度曲线中。但是直到如今，区块链技术并没有像人工智能一样加快融入到我们生活中的步伐。我们如今面临的现状是，最早开始的一些项目迟迟没有进展。比如在金融领域最引人注目的项目 R3CEV 发起的 R3 区块链联盟，尽管其一直保持了成员增长的势头，然而其部分优质成员————包括高盛和桑坦德银行在内————早在 2016 年就离开了这个联盟。R3 甚至推出了 Corda 项目，声明“不需要区块链”，可见至少私有链这一块，我们遇到了很大的麻烦。

目前对区块链技术的追捧热度已经相较前两年有所下降，许多对于区块链的设想和期望也都在逐渐趋于理性。而一昧地将区块链技术和模式往应用场景上套用的做法绝非理智和有效的，甚至可以说是在浪费宝贵的时间和金钱。我们认为，更好的分析区块链技术的本身的特点和问题，能够帮助我们解答一些疑惑和不解。更进一步我们希望能够抛出一些优质的问题，这或许要比得到一些解答更具价值和意义。

#### 区块链的独创性
区块链技术之所以激起如此大的讨论，从技术本身上来说，是由于它提出了一个相对传统方式记录而言更加激进的存储数据信息的方案。在过去，人们往往应用中心化的系统来进行记录的存储，比如说大型的数据库。与之相对的则是区块链中所应用的分布式账本技术（DLT）。无论是账本也好，数据库也好，技术上来说，对数据存储的中心化与否看来是两个方案的冲突所在。

然而更加深入地思考中心化和去中心化这两个词汇，我们看到这两种对立概念的核心区别在于对数据信息所有权的认定。

最为激进的公有链采用的记账方式是完全分布式的，全世界任何人都可以随时进入系统中读取数据、发送可确认交易、竞争记账权。在这里数据信息是系统的，对于任何人开放的，自然也就是属于所有人的。

另一个极端是私有链，其写入权限是由某个组织和机构控制的。参与节点的资格会被严格的限制，由于参与的节点是有限和可控的，这些存储在区块链中的数据，我们只能认为是属于这些机构和组织的。一言以蔽之，DLT 的出现是颠覆了我们所有权数据的数据记录方式，这是区块链的独创性之一。

还有一个非常重要的独创性是沿时间轴存储数据，让区块链系统中的各个节点能够平等地收听区块链这个分布式数据库的广播；且任何一个节点都可以对交易和广播进行验证。前者是所有区块链解决方案的共同特征，但是后者关于交易验证的部分，在具体的落实中存在不同。比如 fabric 中的验证机制和策略是可定制和扩展的，其 channel 通道的使用，也使得并非所有的节点都有同等的权利对交易进行验证。这样的一个技术赋能给区块链带来的是关于共识的优良特性，解决的关键技术问题是分布式系统中一致性难题。这意味着交易可以不再通过权威第三方也同样可以进行。

以上几个独创结合得到的特性，支撑了区块链这个去中心化的系统。在这个系统中成员通常匿名，没有中心实体的存在。每一位成员都能浏览、认证每一条数据记录。理想的情形下，分布式账本应该具备以下特质：正确记载每一条信息；成本低廉；完全去中心化，以避免权力的集中；攻击和篡改网络数据的成本和代价极其高昂。

#### 区块链存在的问题 （TODO！！！！！）

除了目前已知的一些区块链问题，如资源浪费，成本高昂、吞吐量小且慢等等，我们总结了在项目开发过程中摸索到的一些实际问题，并进行一些简要的讨论。

* “所有”和“占有”的剥离

这是一个法律相关的问题。所谓所有和占有的问题，实际上就是在问，信息上链前的信息验证如何解决？上链的数据能够保证真实么？前文说过区块链能够很好地执行所有权的转移，但其却无法真正保证占有的移交。

例如在物流中，我们往往以最后收到物品质量猜测中途物流公司是否对我们从商家购买的商品做手脚。如果说商品质量与描述一致，我们就认为商家物流是可靠的；如果不一致，我们只能一个个对商家、物流、购物平台进行申诉和追责。也即这种物流过程中的所有权移交和占有权转移的一致性是没有实际保障的。

当区块链上移交的资产仅仅是数字资产的时候，这个问题从根本上不存在。然而落实到生产过程和生活中，这个保障就成为了我们一直努力监管的目标。区块链声称的交易真实不可篡改保证了所有权转移过程的真实可追溯，但是对于这方面的用处确实不大，该有的问题仍然毫无改善，反而增加了许多不必要的资源损耗，其带来的优势仅仅在于数据上的可靠不可篡改，而非刺激企业遵守规则。

总的来说，区块链能够记录人们需要履行的义务，但对于拒绝履行义务的成员的处罚，又或是对用户遵守规则提供激励机制，这些区块链都无能为力。事实上这些工作应该由企业或者是整个生态链提供，甚至我们需要相应的执法保障。比如厂商的所有行为都被记录在区块链上，它的订单、物流、抵押、资金流、贷款流向等等信息，甚至水、电、煤信息可以被交叉验证。最后厂商的未来业务仍然依赖链上历史信息来取得资质，这样的一个生态链就形成了一个闭环，相当于给了厂商一个保质保量完成生产的激励。

尽管在某些应用中，如加密货币，执法并非我们所需要考虑的问题，但在另一些应用中，执法却是相当重要的环节。最为典型的例子就是区块链在房地产登记中的应用。目前，在世界范围内，瑞典、印度等国已经开始使用基于区块链的系统来进行房地产登记的管理。不论何时何地，政府都会参与到相关过程中。对于执法力度和政府支持的需求将会大幅度减少“分叉竞争”所能带来的利益。

* 区块链激励模型，集群的不稳定性。

我们在完成项目的始终都一直存在着这样一个疑问：区块链是医疗行业存在痛点的合适方案吗？比如说我们在做的简化转诊流程，电子病例共享方案，又比如说医疗行业异地医保报销难问题、医疗资源分配不均问题等等；其次我们使用区块链的技术是否具有强力的吸引力呢？是否有取代现有解决方案的可能？

为了得到答案，我们项目组进行了实地的调研和考察。在广东省人民医院的实际调研过后，我们得到的结论是：区块链方案并非是一个无可替代的解决方式，对于行业痛点来说，它并非是一个全能的答案。至少区块链能够做到的，现有技术也能够解决。另外就是现有的医院和医生对现有医疗平台的依附性极强，一整套的区块链技术的更换和产品迭代所带来的风险远远超过应用区块链技术所能带来的潜在收益。这使得院方对我们提出的方案始终是持有保留和观望的态度。基于这样的调研结果，我们小组认为当下能够做到的，只有将应用对现有平台的侵入性尽可能降低，否则我们推出的应用方案并不存在落地的实质可能。

第二个问题是，区块链网络对于所有用户的吸引力是否足够。换一个说法就是，区块链网络对于用户的激励模型设计是否适合我们选取的场景？这个并非是一个可以被忽视的问题，或许这能够解释区块链尚未在全行业普及开来。

如果我们单纯的从获利的角度出发来讨论区块链对于企业的吸引力，我们发现区块链本身的机制存在相当的天然制约性。针对节点作恶问题，以比特币现金为例，比特币使用的 POW 算法，使得区块链具有了“自由加入”的特性，“自由加入”是公有链所具有的特性，它大大鼓励了人们使用区块链系统。公有链的匿名、自由、交易不可篡改的特性给网络欺诈施加了极大成本压力的同时保障了交易人的财产安全性。相对应的，在过去，中心化的中介商不实施欺诈行为的动机在于，一旦不法行为被发现，其特许权价值会大打折扣，甚至更严重的会直接导致其破产或者倒闭。也就是说，他们行为的动机来自于预期的利润。如果某次篡改账本之所得超过了预期利润的损失，他们则有可能实施欺诈行为。

我们对两种解决方案做一个简单的比较就会发现，由于区块链系统中不存在所谓的特许权价值，因为每一位成员都能够自由地进入系统，也能够自由地在系统中进行交易。这带来的问题就是，对于数据大户，如银行、大型互联网公司、三甲医院等，其依靠大量高质量数据壁垒建立起的“特许权”使得它们天然具有排斥区块链这种分布式应用的特征。数据大户本身拥有大量可靠的高价值的用户数据，当它们加入到系统中，它的贡献将会是巨大的，然而它能够从系统中交易获得的价值远远小于只拥有少量数据的一方。简单来说就是投入产出比极低，而且直接为扶持别的企业提供了机会。

从另一方面来讲，诸如医院、政府机构等公立机构和组织来说，它们资源和人才属于国有，从这点来说区块链中自由准入的激励机制更加不起效果。而且区块链提出的这种去中心化方案付出了极大资源浪费的代价，这也和医院、政府机关等部门的利益不符。所以即使说有强力的第三方，将所有企业或者机构整合起来加入到区块链网络中，区块链的网络集群从一开始就带来了强不稳定性，其结果要么是重要节点退出网络，要么是网络中的数据不具有真正的价值，最后的系统崩溃也就无法避免了。

例如现在搭建的各种联盟链，认定多个认可的节点共享信息。但这似乎还远远不够。这种机制运作下来，联盟链内的各方只是获取了历史信息的一个子集，其集群内部数据生态会一定程度的改善，不过也带来不稳定性。

总之，想要实现在一个行业中的大规模落地，区块链必须首先建立起一个完整的区块链生态的循环。而区块链生态中能够交易的必然是种种的数字资产。大量的数据交易或者共享应该是这个区块链网络的特征之一。其次交易或是共享的数据是否涉及隐私？是否对公司/企业有益？企业仅仅是分享部分数据么？目前来说真正重要的数据，还隐藏在巨头银行和各家公司数据中心的深处，区块链网络是否有足够的吸引力使得这些数据能够在网络中交易和共享？又或者能否通过某种程度的定价来实现加密数据共享？项目组在另一个名为“医链通”的比赛项目中曾经做出过相应的讨论和尝试。这里不再完整赘述。

## Reference
[Hyperledger](https://www.hyperledger.org/)
[Github/hyperledger/fabric](https://github.com/hyperledger/fabric)
[Unlocking Economic Advantage with Blockchain](https://www.jpmorgan.com/global/cib/markets-investor-services/blockchain-economics)
[Blockchain rewires financial markets. Trailblazers take the lead](https://www.hyperledger.org/wp-content/uploads/2016/10/Blockchain-rewires-financial-markets.pdf)
[Hyperledger Blockchain Performance Metrics————White Paper](https://www.hyperledger.org/resources/publications/blockchain-performance-metrics#)
[Abadi, Joseph, and Markus K. Brunnermeier. “Blockchain Economics”. Working Paper: n. pag.](https://scholar.princeton.edu/sites/default/files/markus/files/blockchain_paper_v5a.pdf)
[Christian Catalini and Joshua Gans. Some simple economics of the blockchain. 2017.](http://www.nber.org/papers/w22952.pdf)
[Blockchain区块链架构设计之四：Fabric多通道和下一代账本设计](https://zhuanlan.zhihu.com/p/24605987)
[Consensus (computer science)————维基百科](https://en.wikipedia.org/wiki/Consensus_(computer_science))
[Smart contract————维基百科](https://en.wikipedia.org/wiki/Smart_contract)
[共识算法（POW,POS,DPOS,PBFT）介绍和心得————csdn](https://blog.csdn.net/lsttoy/article/details/61624287)
[2018 年中国区块链产业白皮书](http://www.miit.gov.cn/n1146290/n1146402/n1146445/c6180238/part/6180297.pdf)
[NEO 白皮书](http://docs.neo.org/zh-cn/whitepaper.html)
[区块链技术指南————gitbook](https://yeasy.gitbooks.io/blockchain_guide/content/)
[Hyperledger fabric 代码解析 之 Orderer Service](https://zhuanlan.zhihu.com/p/25358777)
[区块链解决信贷业务难点的可为与不可为](http://wemedia.ifeng.com/85790696/wemedia.shtml)

